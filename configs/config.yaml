app:
  name: "bronivik-go"
  environment: "staging"  # production/staging
  version: "1.0.0"

telegram:
  bot_token: ${BOT_TOKEN}
  webhook_url: ""  # если используем webhook
  debug: true

managers:
  - 1295070216

managers_contacts:
  - "Иван: +7-900-123-45-67 @gerruda"
  - "Мария: +7-900-765-43-21"

blacklist:
  - 111111111
  - 222222222

exports:
  path: "./exports/"

database:
  path: "./data/bookings.db"
  postgres:
    host: "localhost"
    port: 5432
    user: ${BOT_USER}
    password: ${BOT_PASSWORD}
    dbname: ${POSTGRES_DB}
    sslmode: "disable"
    max_connections: 20
    migration_table: "schema_migrations"

redis:
  address: "localhost:6379"
  password: ""
  db: 0
  pool_size: 10

backup:
  enabled: true
  schedule: "0 2 * * *"  # ежедневно в 2:00
  retention_days: 30
  storage_path: "/var/backups/bot"

monitoring:
  prometheus_enabled: true
  prometheus_port: 9090
  health_check_port: 8080
  log_level: "info"  # debug/info/warn/error

logging:
  level: "info"
  format: "json"  # json/text
  output: "stdout" # stdout/file
  file_path: "/var/log/bot/app.log"

google:
  credentials_file: ${GOOGLE_CREDENTIALS_FILE}
  users_spreadsheet_id: ${USERS_SPREADSHEET_ID}
  bookings_spreadsheet_id: ${BOOKINGS_SPREADSHEET_ID}

bot:
  reminder_time: "09:00"
  pagination_size: 8
  max_booking_days: 365
  min_booking_advance: 0 # hours

api:
  enabled: true
  http:
    enabled: true
    port: 8080
  grpc:
    port: 8081
    reflection: true
    tls:
      enabled: false
      cert_file: "./certs/server.crt"
      key_file: "./certs/server.key"
      client_ca_file: "./certs/ca.crt"
      require_client_cert: true
  auth:
    enabled: true
    header_api_key: "x-api-key"
    header_extra: "x-api-extra"
    api_keys:
      - key: ${CRM_API_KEY}
        extra: ${CRM_API_EXTRA}
        name: "bronivik_crm"
        permissions: ["read:availability", "read:items"]
  rate_limit:
    rps: 5
    burst: 10